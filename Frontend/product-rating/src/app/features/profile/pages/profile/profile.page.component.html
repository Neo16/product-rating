<div *ngIf="profile" class="profile-header">
   <div class="avatar-wrapper">
      <ng-container *ngIf="profile.avatar != null">
          <img [src]="profile.avatar"/>
      </ng-container>
      <ng-container *ngIf="profile.avatar == null">
          <img src="http://cdn.patch.com/assets/contrib/images/placeholder-user-photo.png"/>
      </ng-container>
   </div>
   <div class="basic-profile-data-wrapper">
      <div class="name-row">
         <p class="username">{{profile.nickName}}</p>
         <p class="userrole">{{profile.role}}</p>
      </div>    
      <div class="action-row">
          <button *ngIf="profile.isMine && !isEditing"
           (click)="isEditing = !isEditing"
           class="btn btn-outline-primary">Edit profile</button>  
       </div> 

       <!-- TODO: picture upload -->
   </div>  
</div>
<div *ngIf="profile==null" class="profile-header">
    <div class="avatar-wrapper">       
        <img src="http://cdn.patch.com/assets/contrib/images/placeholder-user-photo.png"/>       
     </div>
</div>

<div class="profile-details">
  <ngb-tabset>
    <ngb-tab title="About">
      <ng-template ngbTabContent> 
        <!-- If isEditing is true: form is active, otherwise display profile data -->
        <div *ngIf="profile != null && !isEditing" class="detail-tab">      
            <app-profile-data [profile]="profile"></app-profile-data>
        </div>  
        <div *ngIf="editModel != null && isEditing"class="detail-tab">
          <app-edit-profile-form
             (save) = "saveProfile();"
             [profile]="editModel"></app-edit-profile-form>
        </div>    
      </ng-template>
    </ngb-tab>
    <ngb-tab title="Security">
        <ng-template ngbTabContent>
          <div *ngIf="profile.isMine" class="detail-tab">
              <p>TODO change password form</p>   
          </div>       
        </ng-template>
      </ngb-tab>
    <ngb-tab title="Activity">
      <ng-template ngbTabContent>
        <div class="detail-tab">
            <p>TODO show revies given by user</p>   
        </div>       
      </ng-template>
    </ngb-tab>   
  </ngb-tabset>
</div>
